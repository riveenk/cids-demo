<!DOCTYPE html>
<html class="h-full bg-gray-50" lang="en">

<head h-full bg-gray-50>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="./media/favicon.ico">
    <link rel="stylesheet" type="text/css" href="./style.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="./script.js"></script>
    <title>Colombo Independent Debaters' Society</title>
</head>

<body></body>
<script>
    createNavBar();
</script>
<div class="body-main" id="bodyMain">
    <div class="web-body" id="webBody">
        <div class="members-top-bar">
            <p class="greeting" id="greeting"></p>
            <button id="logoutBtn">Logout</button>
        </div>
    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        createFooter();

        supabaseClient.auth.getSession().then(({ data: { session } }) => {
            if (!session) {
                window.location.href = "./login.html";
            } else {
                document.getElementById('greeting').textContent = `Welcome, ${session.user.email.substring(0, 14) + "..."}`;
            }
        });
        
        document.getElementById("logoutBtn").addEventListener("click", logout);
    });
</script>
</body>

</html>